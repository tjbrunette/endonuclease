#!/usr/bin/perl

use strict;
use warnings;

use File::Copy qw/ move /;
use Getopt::Long qw/ GetOptions /;
use File::Basename qw/ basename dirname /;

my %options;
$options{find}    = 0;
$options{replace} = 0;
$options{dry_run} = 0;
&GetOptions(
	\%options,
	"find=s",
	"replace=s",
	"dry_run!",
);

foreach my $fn (@ARGV) {
	my $new_fn = basename($fn);
	$new_fn =~ s/$options{find}/$options{replace}/g;
	$new_fn = join '/', (dirname($fn),$new_fn);

	print "$fn => $new_fn\n";
	if ( !$options{dry_run} ) {
		move( $fn, $new_fn ) or die "Error renaming $fn to $new_fn!\n";;
	}
}
